install.packages("tidyverse")
library(tidyverse)
isntall.packages("tidycensus")
install.packages("tidycensus")
library(tidycensus)
?tidycensus
vars <- c("PUMA", "SERIALNO", "SPORDER", "ST", "SEX", "AGEP", "FER", "OC", "PAOC", "SCHL", "HUPAOC")
il_pums <- get_pums(variables = vars,
state = "IL",
survey = "acs1",
year = 2022)
census_api_key("e91cae5f77b0e7a0646ef73bd2f959627d86b398")
il_pums <- get_pums(variables = vars,
state = "IL",
survey = "acs1",
year = 2022)
View(il_pums)
vars <- c("SERIALNO", "SPORDER", "SEX", "AGEP", "FER")
us_pums <- get_pums(variables = vars,
survey = "acs1",
year = 2022)
us_pums <- get_pums(variables = vars,
state = "all",
survey = "acs1",
year = 2022)
rm(il_pums)
View(us_pums)
skimr::skim(us_pums)
us_pums %>% filter(FER != "b")
women_us <- us_pums %>%
filter(FER != "b")
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n())
women_us %>%
group_by(AGEP) %>%
mutate(total = n())
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n())
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n()) %>%
group_by(AGEP) %>%
mutate(total = sum(n))
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n()) %>%
group_by(AGEP) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(percent_pregnant = n / total)
summary_2022 <- women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n()) %>%
group_by(AGEP) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(percent_pregnant = n / total) %>%
select(-total)
View(summary_2022)
summary_2022 <- women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n()) %>%
group_by(AGEP) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(percent_pregnant = n / total) %>%
filter(FER = "1")
summary_2022 <- women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n()) %>%
group_by(AGEP) %>%
mutate(total = sum(n)) %>%
ungroup() %>%
mutate(percent_pregnant = n / total) %>%
filter(FER == "1") %>%
select(-c(FER, total, n))
View(summary_2022)
View(women_us)
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
theme_bw()
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(x = "Age of Woman") +
theme_bw()
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
theme(axis.title.y = element_blank()) +
theme_bw()
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
theme_bw() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent) +
theme_bw() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent,
limits = c(0, 0.125)) +
theme_bw() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent,
limits = c(0, 0.125)) +
theme_calc() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent,
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent,
limits = c(0, 0.125),
breaks = 4) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent,
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent(accuracy = 0.01),
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::percent(accuracy = 1),
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = scales::percent(percent_pregnant, accuracy = 0.01))) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = scales::percent(percent_pregnant))) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.01),
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125, 0.025)) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125),
n.breaks = 4) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125),
n.breaks = 5) +
theme_minimal() +
theme(axis.title.y = element_blank())
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125),
n.breaks = 6) +
theme_minimal() +
theme(axis.title.y = element_blank())
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = n())
women_us %>%
group_by(AGEP, FER) %>%
summarise(n = sum(PWGTP))
women_us %>%
group_by(AGEP, FER) %>%
summarise(n_weighted = sum(PWGTP)) %>%
group_by(AGEP) %>%
mutate(total_weighted = sum(n_weighted)) %>%
ungroup() %>%
mutate(percent_pregnant = n_weighted / total_weighted) %>%
filter(FER == "1") %>%
select(-c(FER, total_weighted, n_weighted))
summary_2022 <- women_us %>%
group_by(AGEP, FER) %>%
summarise(n_weighted = sum(PWGTP)) %>%
group_by(AGEP) %>%
mutate(total_weighted = sum(n_weighted)) %>%
ungroup() %>%
mutate(percent_pregnant = n_weighted / total_weighted) %>%
filter(FER == "1") %>%
select(-c(FER, total_weighted, n_weighted))
summary_2022 %>% ggplot() +
geom_line(aes(x = AGEP, y = percent_pregnant)) +
labs(title = "Did you give birth to a child in the last 12 months?",
x = "Age of Woman") +
scale_y_continuous(labels = scales::label_percent(accuracy = 0.1),
limits = c(0, 0.125),
n.breaks = 6) +
theme_minimal() +
theme(axis.title.y = element_blank())
women_us %>%
group_by(AGEP, FER) %>%
summarise(n_weighted = n(wt = PWGTP))
women_us %>%
group_by(AGEP, FER) %>%
summarise(n_weighted = count(wt = PWGTP))
View(us_pums)
# Installing required packages
packages <- c("tidyverse", "OECD")
to_install <- packages[!(packages %in% installed.packages()[,"Package"])]
if(length(to_install) > 0) install.packages(to_install)
lapply(packages, require, character.only = TRUE)
# Clean workspace
rm(list = ls())
# Set working directory
setwd("C:/Users/gustavoml/Desktop/Projects/FertilityFacts")
browse_metadata("DSD_SOCX_AGG@DF_PUB_FAM")
browse_metadata("DSD_SOCX_AGG")
?get_da
?get_dataset
get_dataset("DSD_SOCX_AGG@DF_PUB_FAM",
start_time = 1980,
end_time = 2021)
get_dataset("EPL_OV",
start_time = 1980,
end_time = 2021)
get_dataset("DF_PUB_FAM",
start_time = 1980,
end_time = 2021)
get_dataset("DSD_SOCX_AGG",
start_time = 1980,
end_time = 2021)
get_dataset("DSD_SOCX_AGG")
get_dataset("DSD_SOCX_AGG@DF_PUB_FAM")
get_dataset("DSD_SOCX_AGG@DF_PUB_FAM", pre_formatted = TRUE)
get_dataset("DF_NET_GDP")
get_dataset("PATS_REGION")
# Downloading Childcare Spending data from OECD
dataset <- "OECD.ELS.SPD,DSD_SOCX_AGG@DF_PUB_FAM,1.0"
filter <- ".A.SOCX.USD_PPP_PS.._T.TP51.Q"
get_dataset(dataset, filter)
# Downloading Childcare Spending data from OECD
dataset <- "OECD.ELS.SPD,DSD_SOCX_AGG@DF_PUB_FAM,1.0"
filter <- ".A.SOCX.USD_PPP_PS.._T.TP51.Q"
get_dataset(dataset, filter)
get_dataset(dataset)
# Installing required packages
packages <- c("tidyverse", "devtools")
to_install <- packages[!(packages %in% installed.packages()[,"Package"])]
if(length(to_install) > 0) install.packages(to_install)
lapply(packages, require, character.only = TRUE)
# Installing development version of OECD package
install_github("expersso/OECD")
# Clean workspace
rm(list = ls())
# Set working directory
setwd("C:/Users/gustavoml/Desktop/Projects/FertilityFacts")
# Downloading Childcare Spending data from OECD
dataset <- "OECD.ELS.SPD,DSD_SOCX_AGG@DF_PUB_FAM,1.0"
filter <- ".A.SOCX.USD_PPP_PS.._T.TP51.Q"
get_dataset(dataset)
get_dataset(dataset, filter)
